{"ast":null,"code":"var _jsxFileName = \"/Users/danielcrow/Documents/development/cloudfoundry/capture/capture-ui/src/components/DocumentUnderstanding/DocumentUnderstanding.js\";\nimport React, { Component } from \"react\";\nimport UploadService from \"../../services/upload-files.service\";\nimport FileViewer from 'react-file-viewer';\nimport { Button, FileUploaderDropContainer, Breadcrumb, BreadcrumbItem } from 'carbon-components-react';\nimport ResultsList from './ResultsList';\nimport { WarningFilled16 } from '@carbon/icons-react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class UploadFiles extends Component {\n  constructor(props) {\n    super(props);\n    this.selectFile = this.selectFile.bind(this);\n    this.upload = this.upload.bind(this);\n    this.state = {\n      selectedFiles: undefined,\n      currentFile: undefined,\n      progress: 0,\n      message: \"Please Upload Your Document\",\n      results: [],\n      docUrls: [{\n        fileData: ''\n      }],\n      fileInfos: [],\n      docUrl: undefined,\n      docStatus: \"Begin\"\n    };\n  }\n\n  selectFile(event) {\n    //console.log(event.target.files)\n    this.setState({\n      selectedFiles: event.target.files\n    });\n    let currentFile = event.target.files[0];\n    UploadService.upload(currentFile, event => {\n      this.setState({\n        progress: Math.round(100 * event.loaded / event.total)\n      });\n    }).then(response => {\n      console.log(response.data.transactionalId);\n      var getImagePath = URL.createObjectURL(currentFile);\n      console.log(getImagePath);\n      this.setState({\n        transactionalId: response.data.transactionalId,\n        message: \"Uploaded Document\",\n        docUrl: \"/api/documentunderstanding/getdoc/\" + response.data.transactionalId + \"/pdf\"\n      });\n    });\n  }\n\n  upload() {\n    let currentFile = this.state.selectedFiles[0];\n    UploadService.executeRules(this.state.transactionalId, event => {\n      this.setState({\n        progress: Math.round(100 * event.loaded / event.total)\n      });\n    }).then(response => {\n      console.log(response.data);\n      this.setState({\n        results: response.data.values,\n        message: \"Document Processed\",\n        transactionId: response.data.transactionalId,\n        docUrl: \"http://localhost:3001/api/documentunderstanding/getdoc/\" + response.data.transactionalId + \"/pdf\"\n      });\n      console.log(this.state);\n      return \"stuff\";\n    });\n    this.setState({\n      selectedFiles: undefined\n    });\n  }\n\n  render() {\n    const {\n      selectedFiles,\n      currentFile,\n      progress,\n      message,\n      fileInfos\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"bx--grid--full-width\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"bx--row\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"bx--col-lg-16 bx--col-md-8 bx--col-sm-4\",\n            children: [/*#__PURE__*/_jsxDEV(Breadcrumb, {\n              \"aria-label\": \"Page navigation\",\n              children: /*#__PURE__*/_jsxDEV(BreadcrumbItem, {\n                children: /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: \"/\",\n                  children: \"Getting started\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 98,\n                  columnNumber: 11\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 97,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 7\n            }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"landing-page__heading\",\n              children: this.state.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 9\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"bx--row\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"bx--col-lg-16 bx--col-md-8 bx--col-sm-4\",\n            children: /*#__PURE__*/_jsxDEV(FileUploaderDropContainer, {\n              accept: ['.jpg', '.pdf'],\n              onAddFiles: this.selectFile,\n              buttonKind: \"primary\",\n              buttonLabel: \"Add files\",\n              filenameStatus: \"edit\",\n              iconDescription: \"Clear file\",\n              labelText: \"Add File to this container\",\n              class: \"fileuploader-dcap\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 5\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"bx--row\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"bx--col-lg-16 bx--col-md-8 bx--col-sm-4\",\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              disabled: !selectedFiles,\n              onClick: this.upload,\n              children: \"Process Document\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"bx--row\",\n          children: [this.state.docStatus != \"Document Processed\" && /*#__PURE__*/_jsxDEV(InlineLoading, {\n            description: \"Loading...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 5\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"bx--col-lg-8 bx--col-md-4 bx--col-sm-2\",\n            children: this.state.message == \"Document Processed\" && /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(ResultsList, {\n                results: this.state.results\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 137,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 7\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"bx--col-lg-8 bx--col-md-4 bx--col-sm-2\",\n            children: this.state.docUrl != undefined && /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(FileViewer, {\n                fileType: \"pdf\",\n                filePath: this.state.docUrl\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 145,\n                columnNumber: 8\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 3\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 3\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/danielcrow/Documents/development/cloudfoundry/capture/capture-ui/src/components/DocumentUnderstanding/DocumentUnderstanding.js"],"names":["React","Component","UploadService","FileViewer","Button","FileUploaderDropContainer","Breadcrumb","BreadcrumbItem","ResultsList","WarningFilled16","UploadFiles","constructor","props","selectFile","bind","upload","state","selectedFiles","undefined","currentFile","progress","message","results","docUrls","fileData","fileInfos","docUrl","docStatus","event","setState","target","files","Math","round","loaded","total","then","response","console","log","data","transactionalId","getImagePath","URL","createObjectURL","executeRules","values","transactionId","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport UploadService from \"../../services/upload-files.service\";\nimport FileViewer from 'react-file-viewer';\nimport { Button,FileUploaderDropContainer,Breadcrumb,BreadcrumbItem } from 'carbon-components-react';\nimport ResultsList from './ResultsList'\nimport { WarningFilled16 } from '@carbon/icons-react';\n\nexport default class UploadFiles extends Component {\n  constructor(props) {\n    super(props);\n    this.selectFile = this.selectFile.bind(this);\n    this.upload = this.upload.bind(this);\n\n    this.state = {\n      selectedFiles: undefined,\n      currentFile: undefined,\n      progress: 0,\n      message: \"Please Upload Your Document\",\n      results: [],\n      docUrls: [ { fileData: '' } ],\n      fileInfos: [],\n      docUrl: undefined,\n      docStatus: \"Begin\"\n    };\n  }\n\n  selectFile(event) {\n    //console.log(event.target.files)\n    this.setState({\n      selectedFiles: event.target.files,\n    });\n    let currentFile = event.target.files[0];\n    UploadService.upload(currentFile, (event) => {\n      this.setState({\n        progress: Math.round((100 * event.loaded) / event.total),\n      });\n    }).then((response) => {\n        console.log(response.data.transactionalId);\n        var getImagePath = URL.createObjectURL(currentFile);\n        console.log(getImagePath);\n        this.setState({\n            transactionalId: response.data.transactionalId,\n            message: \"Uploaded Document\",\n            docUrl: \"/api/documentunderstanding/getdoc/\" + response.data.transactionalId+ \"/pdf\"\n        })\n      })\n\n\n\n\n\n  }\n\n  upload() {\n    let currentFile = this.state.selectedFiles[0];\n\n    UploadService.executeRules(this.state.transactionalId,(event) =>{\n        this.setState({\n        progress: Math.round((100 * event.loaded) / event.total),\n      });\n    }).then((response)=>{\n      console.log(response.data)\n\n      this.setState({\n        results: response.data.values,\n        message: \"Document Processed\",\n        transactionId: response.data.transactionalId,\n        docUrl: \"http://localhost:3001/api/documentunderstanding/getdoc/\" + response.data.transactionalId+ \"/pdf\"\n      });\n      console.log(this.state);\n      return \"stuff\"\n    })\n\n    this.setState({\n      selectedFiles: undefined,\n    });\n  }\n\n\n\n  render() {\n    const {\n      selectedFiles,\n      currentFile,\n      progress,\n      message,\n      fileInfos,\n    } = this.state;\n\n    return (\n  <div>\n\n  <div class=\"bx--grid--full-width\">\n    <div class=\"bx--row\">\n      <div class=\"bx--col-lg-16 bx--col-md-8 bx--col-sm-4\">\n      <Breadcrumb aria-label=\"Page navigation\">\n        <BreadcrumbItem>\n          <a href=\"/\">Getting started</a>\n          </BreadcrumbItem>\n          </Breadcrumb>\n        <h1 className=\"landing-page__heading\">{this.state.message}</h1>\n      </div>\n    </div>\n    <div class=\"bx--row\">\n    <div class=\"bx--col-lg-16 bx--col-md-8 bx--col-sm-4\">\n        <FileUploaderDropContainer\n          accept={[\n            '.jpg',\n            '.pdf'\n          ]}\n          onAddFiles={this.selectFile}\n          buttonKind=\"primary\"\n          buttonLabel=\"Add files\"\n          filenameStatus=\"edit\"\n          iconDescription=\"Clear file\"\n          labelText=\"Add File to this container\"\n          class=\"fileuploader-dcap\"\n          ></FileUploaderDropContainer>\n\n      </div>\n    </div>\n    <div class=\"bx--row\">\n      <div class=\"bx--col-lg-16 bx--col-md-8 bx--col-sm-4\">\n       <Button disabled={!selectedFiles} onClick={this.upload} >\n         Process Document\n         </Button>\n      </div>\n    </div>\n    <div class=\"bx--row\">\n    {this.state.docStatus!=\"Document Processed\" &&\n    <InlineLoading description=\"Loading...\" />\n    }\n\n      <div class=\"bx--col-lg-8 bx--col-md-4 bx--col-sm-2\">\n      {this.state.message==\"Document Processed\" &&\n      <div>\n        <ResultsList results={this.state.results} />\n       </div>\n      }\n      </div>\n      <div class=\"bx--col-lg-8 bx--col-md-4 bx--col-sm-2\">\n      {this.state.docUrl != undefined  &&\n        <div>\n\n       <FileViewer fileType=\"pdf\" filePath={this.state.docUrl} />\n       </div>\n      }\n      </div>\n\n\n    </div>\n  </div>\n\n\n\n\n\n\n\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}