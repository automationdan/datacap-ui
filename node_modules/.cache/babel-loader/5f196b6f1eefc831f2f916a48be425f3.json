{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _typeof from \"@babel/runtime/helpers/typeof\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"children\", \"className\", \"id\", \"level\", \"open\", \"size\", \"target\", \"x\", \"y\", \"onClose\"];\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n/**\n * Copyright IBM Corp. 2020\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\nimport React, { useEffect, useRef, useState } from 'react';\nimport ReactDOM from 'react-dom';\nimport classnames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { settings } from 'carbon-components';\nimport { keys, match } from '../../internal/keyboard';\nimport { capWithinRange, clickedElementHasSubnodes, focusNode as focusNodeUtil, getNextNode, getParentMenu, getParentNode, getPosition, getValidNodes, resetFocus } from './_utils';\nimport MenuGroup from './MenuGroup';\nimport MenuRadioGroup from './MenuRadioGroup';\nimport MenuRadioGroupOptions from './MenuRadioGroupOptions';\nimport MenuSelectableItem from './MenuSelectableItem';\nvar prefix = settings.prefix;\nvar margin = 16; // distance to keep to body edges, in px\n\nvar defaultSize = 'sm';\n\nvar Menu = function Menu(_ref) {\n  var _classnames;\n\n  var children = _ref.children,\n      className = _ref.className,\n      id = _ref.id,\n      _ref$level = _ref.level,\n      level = _ref$level === void 0 ? 1 : _ref$level,\n      open = _ref.open,\n      _ref$size = _ref.size,\n      size = _ref$size === void 0 ? defaultSize : _ref$size,\n      _ref$target = _ref.target,\n      target = _ref$target === void 0 ? document.body : _ref$target,\n      _ref$x = _ref.x,\n      x = _ref$x === void 0 ? 0 : _ref$x,\n      _ref$y = _ref.y,\n      y = _ref$y === void 0 ? 0 : _ref$y,\n      _ref$onClose = _ref.onClose,\n      onClose = _ref$onClose === void 0 ? function () {} : _ref$onClose,\n      rest = _objectWithoutProperties(_ref, _excluded);\n\n  var rootRef = useRef(null);\n\n  var _useState = useState(1),\n      _useState2 = _slicedToArray(_useState, 2),\n      direction = _useState2[0],\n      setDirection = _useState2[1]; // 1 = to right, -1 = to left\n\n\n  var _useState3 = useState([x, y]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      position = _useState4[0],\n      setPosition = _useState4[1];\n\n  var isRootMenu = level === 1;\n  var focusReturn = useRef(null);\n\n  function returnFocus() {\n    if (focusReturn.current) {\n      focusReturn.current.focus();\n    }\n  }\n\n  function close(eventType) {\n    var isKeyboardEvent = /^key/.test(eventType);\n\n    if (isKeyboardEvent) {\n      window.addEventListener('keyup', returnFocus, {\n        once: true\n      });\n    } else {\n      window.addEventListener('mouseup', returnFocus, {\n        once: true\n      });\n    }\n\n    onClose();\n  }\n\n  function getContainerBoundaries() {\n    var _document$body = document.body,\n        bodyWidth = _document$body.clientWidth,\n        bodyHeight = _document$body.clientHeight;\n    return [margin, margin, bodyWidth - margin, bodyHeight - margin];\n  }\n\n  function getTargetBoundaries() {\n    var xIsRange = _typeof(x) === 'object' && x.length === 2;\n    var yIsRange = _typeof(y) === 'object' && y.length === 2;\n    var targetBoundaries = [xIsRange ? x[0] : x, yIsRange ? y[0] : y, xIsRange ? x[1] : x, yIsRange ? y[1] : y];\n\n    if (!isRootMenu) {\n      var _getParentMenu;\n\n      var _getParentMenu$getBou = (_getParentMenu = getParentMenu(rootRef.current)) === null || _getParentMenu === void 0 ? void 0 : _getParentMenu.getBoundingClientRect(),\n          parentWidth = _getParentMenu$getBou.width;\n\n      targetBoundaries[2] -= parentWidth;\n    }\n\n    var containerBoundaries = getContainerBoundaries();\n    return [capWithinRange(targetBoundaries[0], containerBoundaries[0], containerBoundaries[2]), capWithinRange(targetBoundaries[1], containerBoundaries[1], containerBoundaries[3]), capWithinRange(targetBoundaries[2], containerBoundaries[0], containerBoundaries[2]), capWithinRange(targetBoundaries[3], containerBoundaries[1], containerBoundaries[3])];\n  }\n\n  function focusNode(node) {\n    if (node) {\n      resetFocus(rootRef.current);\n      focusNodeUtil(node);\n    }\n  }\n\n  function handleKeyDown(event) {\n    if (match(event, keys.Tab)) {\n      event.preventDefault();\n      close(event.type);\n    }\n\n    if (event.target.tagName === 'LI' && (match(event, keys.Enter) || match(event, keys.Space))) {\n      handleClick(event);\n    } else {\n      event.stopPropagation();\n    }\n\n    if (match(event, keys.Escape) || !isRootMenu && match(event, keys.ArrowLeft)) {\n      close(event.type);\n    }\n\n    var nodeToFocus;\n\n    if (event.target.tagName === 'LI') {\n      var currentNode = event.target;\n\n      if (match(event, keys.ArrowUp)) {\n        nodeToFocus = getNextNode(currentNode, -1);\n      } else if (match(event, keys.ArrowDown)) {\n        nodeToFocus = getNextNode(currentNode, 1);\n      } else if (match(event, keys.ArrowLeft)) {\n        nodeToFocus = getParentNode(currentNode);\n      }\n    } else if (event.target.tagName === 'UL') {\n      var validNodes = getValidNodes(event.target);\n\n      if (validNodes.length > 0 && match(event, keys.ArrowUp)) {\n        nodeToFocus = validNodes[validNodes.length - 1];\n      } else if (validNodes.length > 0 && match(event, keys.ArrowDown)) {\n        nodeToFocus = validNodes[0];\n      }\n    }\n\n    focusNode(nodeToFocus);\n\n    if (rest.onKeyDown) {\n      rest.onKeyDown(event);\n    }\n  }\n\n  function handleClick(event) {\n    if (!clickedElementHasSubnodes(event) && event.target.tagName !== 'UL') {\n      close(event.type);\n    } else {\n      event.stopPropagation();\n    }\n  }\n\n  function getCorrectedPosition(preferredDirection) {\n    var _rootRef$current;\n\n    var elementRect = (_rootRef$current = rootRef.current) === null || _rootRef$current === void 0 ? void 0 : _rootRef$current.getBoundingClientRect();\n    var elementDimensions = [elementRect.width, elementRect.height];\n    var targetBoundaries = getTargetBoundaries();\n    var containerBoundaries = getContainerBoundaries();\n\n    var _getPosition = getPosition(elementDimensions, targetBoundaries, containerBoundaries, preferredDirection),\n        correctedPosition = _getPosition.position,\n        correctedDirection = _getPosition.direction;\n\n    setDirection(correctedDirection);\n    return correctedPosition;\n  }\n\n  function handleBlur(event) {\n    var _rootRef$current2;\n\n    if (isRootMenu && !((_rootRef$current2 = rootRef.current) !== null && _rootRef$current2 !== void 0 && _rootRef$current2.contains(event.relatedTarget))) {\n      close(event.type);\n    }\n  }\n\n  useEffect(function () {\n    if (open) {\n      focusReturn.current = document.activeElement;\n      var localDirection = 1;\n\n      if (isRootMenu) {\n        var _rootRef$current3;\n\n        (_rootRef$current3 = rootRef.current) === null || _rootRef$current3 === void 0 ? void 0 : _rootRef$current3.focus();\n      } else {\n        var parentMenu = getParentMenu(rootRef.current);\n\n        if (parentMenu) {\n          localDirection = Number(parentMenu.dataset.direction);\n        }\n      }\n\n      var correctedPosition = getCorrectedPosition(localDirection);\n      setPosition(correctedPosition);\n    } else {\n      setPosition([0, 0]);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [open, x, y]);\n  var someNodesHaveIcons = React.Children.toArray(children).some(function (node) {\n    return node.type === MenuSelectableItem || node.type === MenuRadioGroup;\n  });\n  var options = React.Children.map(children, function (node) {\n    if ( /*#__PURE__*/React.isValidElement(node)) {\n      return /*#__PURE__*/React.cloneElement(node, {\n        indented: someNodesHaveIcons,\n        level: level\n      });\n    }\n  });\n  var classes = classnames(\"\".concat(prefix, \"--menu\"), (_classnames = {}, _defineProperty(_classnames, \"\".concat(prefix, \"--menu--open\"), open), _defineProperty(_classnames, \"\".concat(prefix, \"--menu--invisible\"), open && position[0] === 0 && position[1] === 0), _defineProperty(_classnames, \"\".concat(prefix, \"--menu--root\"), isRootMenu), _classnames), size !== defaultSize && \"\".concat(prefix, \"--menu--\").concat(size), className);\n\n  var ulAttributes = _objectSpread(_objectSpread({}, rest), {}, {\n    id: id,\n    ref: rootRef,\n    className: classes,\n    onKeyDown: handleKeyDown,\n    onClick: handleClick,\n    onBlur: handleBlur,\n    role: 'menu',\n    tabIndex: -1,\n    'data-direction': direction,\n    'data-level': level,\n    style: {\n      left: \"\".concat(position[0], \"px\"),\n      top: \"\".concat(position[1], \"px\")\n    }\n  });\n\n  var childrenToRender = options; // if the only child is a radiogroup, don't render it as radiogroup component, but\n  // only the items to prevent duplicate markup\n\n  if (options && options.length === 1 && options[0].type === MenuRadioGroup) {\n    var radioGroupProps = options[0].props;\n    ulAttributes['aria-label'] = radioGroupProps.label;\n    childrenToRender = /*#__PURE__*/React.createElement(MenuRadioGroupOptions, {\n      items: radioGroupProps.items,\n      initialSelectedItem: radioGroupProps.initialSelectedItem,\n      onChange: radioGroupProps.onChange\n    });\n  } // if the only child is a generic group, don't render it as group component, but\n  // only the children to prevent duplicate markup\n\n\n  if (options && options.length === 1 && options[0].type === MenuGroup) {\n    var groupProps = options[0].props;\n    ulAttributes['aria-label'] = groupProps.label;\n    childrenToRender = React.Children.toArray(options[0].props.children);\n  }\n\n  var menu = /*#__PURE__*/React.createElement(\"ul\", ulAttributes, childrenToRender);\n  return isRootMenu ? open && /*#__PURE__*/ReactDOM.createPortal(menu, target) || null : menu;\n};\n\nMenu.propTypes = {\n  /**\n   * Specify the children of the Menu\n   */\n  children: PropTypes.node,\n\n  /**\n   * Specify a custom className to apply to the ul node\n   */\n  className: PropTypes.string,\n\n  /**\n   * Define an ID for this menu\n   */\n  id: PropTypes.string,\n\n  /**\n   * Internal: keeps track of the nesting level of the menu\n   */\n  level: PropTypes.number,\n\n  /**\n   * Function called when the menu is closed\n   */\n  onClose: PropTypes.func,\n\n  /**\n   * Specify whether the Menu is currently open\n   */\n  open: PropTypes.bool,\n\n  /**\n   * Specify the size of the menu, from a list of available sizes.\n   */\n  size: PropTypes.oneOf(['sm', 'md', 'lg']),\n\n  /**\n   * Optionally pass an element the Menu should be appended to as a child. Defaults to document.body.\n   */\n  target: PropTypes.element,\n\n  /**\n   * Specify the x position where this menu is rendered\n   */\n  x: PropTypes.oneOfType([PropTypes.number, PropTypes.arrayOf(PropTypes.number)]),\n\n  /**\n   * Specify the y position where this menu is rendered\n   */\n  y: PropTypes.oneOfType([PropTypes.number, PropTypes.arrayOf(PropTypes.number)])\n};\nexport default Menu;","map":{"version":3,"sources":["/Users/danielcrow/Documents/development/cloudfoundry/datacap-ui/node_modules/carbon-components-react/es/components/Menu/Menu.js"],"names":["_defineProperty","_typeof","_slicedToArray","_objectWithoutProperties","_excluded","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","React","useEffect","useRef","useState","ReactDOM","classnames","PropTypes","settings","match","capWithinRange","clickedElementHasSubnodes","focusNode","focusNodeUtil","getNextNode","getParentMenu","getParentNode","getPosition","getValidNodes","resetFocus","MenuGroup","MenuRadioGroup","MenuRadioGroupOptions","MenuSelectableItem","prefix","margin","defaultSize","Menu","_ref","_classnames","children","className","id","_ref$level","level","open","_ref$size","size","_ref$target","document","body","_ref$x","x","_ref$y","y","_ref$onClose","onClose","rest","rootRef","_useState","_useState2","direction","setDirection","_useState3","_useState4","position","setPosition","isRootMenu","focusReturn","returnFocus","current","focus","close","eventType","isKeyboardEvent","test","window","addEventListener","once","getContainerBoundaries","_document$body","bodyWidth","clientWidth","bodyHeight","clientHeight","getTargetBoundaries","xIsRange","yIsRange","targetBoundaries","_getParentMenu","_getParentMenu$getBou","getBoundingClientRect","parentWidth","width","containerBoundaries","node","handleKeyDown","event","Tab","preventDefault","type","tagName","Enter","Space","handleClick","stopPropagation","Escape","ArrowLeft","nodeToFocus","currentNode","ArrowUp","ArrowDown","validNodes","onKeyDown","getCorrectedPosition","preferredDirection","_rootRef$current","elementRect","elementDimensions","height","_getPosition","correctedPosition","correctedDirection","handleBlur","_rootRef$current2","contains","relatedTarget","activeElement","localDirection","_rootRef$current3","parentMenu","Number","dataset","someNodesHaveIcons","Children","toArray","some","options","map","isValidElement","cloneElement","indented","classes","concat","ulAttributes","ref","onClick","onBlur","role","tabIndex","style","left","top","childrenToRender","radioGroupProps","props","label","createElement","items","initialSelectedItem","onChange","groupProps","menu","createPortal","propTypes","string","number","func","bool","oneOf","element","oneOfType","arrayOf"],"mappings":"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","sourcesContent":["import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _typeof from \"@babel/runtime/helpers/typeof\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"children\", \"className\", \"id\", \"level\", \"open\", \"size\", \"target\", \"x\", \"y\", \"onClose\"];\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n/**\n * Copyright IBM Corp. 2020\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport React, { useEffect, useRef, useState } from 'react';\nimport ReactDOM from 'react-dom';\nimport classnames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { settings } from 'carbon-components';\nimport { keys, match } from '../../internal/keyboard';\nimport { capWithinRange, clickedElementHasSubnodes, focusNode as focusNodeUtil, getNextNode, getParentMenu, getParentNode, getPosition, getValidNodes, resetFocus } from './_utils';\nimport MenuGroup from './MenuGroup';\nimport MenuRadioGroup from './MenuRadioGroup';\nimport MenuRadioGroupOptions from './MenuRadioGroupOptions';\nimport MenuSelectableItem from './MenuSelectableItem';\nvar prefix = settings.prefix;\nvar margin = 16; // distance to keep to body edges, in px\n\nvar defaultSize = 'sm';\n\nvar Menu = function Menu(_ref) {\n  var _classnames;\n\n  var children = _ref.children,\n      className = _ref.className,\n      id = _ref.id,\n      _ref$level = _ref.level,\n      level = _ref$level === void 0 ? 1 : _ref$level,\n      open = _ref.open,\n      _ref$size = _ref.size,\n      size = _ref$size === void 0 ? defaultSize : _ref$size,\n      _ref$target = _ref.target,\n      target = _ref$target === void 0 ? document.body : _ref$target,\n      _ref$x = _ref.x,\n      x = _ref$x === void 0 ? 0 : _ref$x,\n      _ref$y = _ref.y,\n      y = _ref$y === void 0 ? 0 : _ref$y,\n      _ref$onClose = _ref.onClose,\n      onClose = _ref$onClose === void 0 ? function () {} : _ref$onClose,\n      rest = _objectWithoutProperties(_ref, _excluded);\n\n  var rootRef = useRef(null);\n\n  var _useState = useState(1),\n      _useState2 = _slicedToArray(_useState, 2),\n      direction = _useState2[0],\n      setDirection = _useState2[1]; // 1 = to right, -1 = to left\n\n\n  var _useState3 = useState([x, y]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      position = _useState4[0],\n      setPosition = _useState4[1];\n\n  var isRootMenu = level === 1;\n  var focusReturn = useRef(null);\n\n  function returnFocus() {\n    if (focusReturn.current) {\n      focusReturn.current.focus();\n    }\n  }\n\n  function close(eventType) {\n    var isKeyboardEvent = /^key/.test(eventType);\n\n    if (isKeyboardEvent) {\n      window.addEventListener('keyup', returnFocus, {\n        once: true\n      });\n    } else {\n      window.addEventListener('mouseup', returnFocus, {\n        once: true\n      });\n    }\n\n    onClose();\n  }\n\n  function getContainerBoundaries() {\n    var _document$body = document.body,\n        bodyWidth = _document$body.clientWidth,\n        bodyHeight = _document$body.clientHeight;\n    return [margin, margin, bodyWidth - margin, bodyHeight - margin];\n  }\n\n  function getTargetBoundaries() {\n    var xIsRange = _typeof(x) === 'object' && x.length === 2;\n    var yIsRange = _typeof(y) === 'object' && y.length === 2;\n    var targetBoundaries = [xIsRange ? x[0] : x, yIsRange ? y[0] : y, xIsRange ? x[1] : x, yIsRange ? y[1] : y];\n\n    if (!isRootMenu) {\n      var _getParentMenu;\n\n      var _getParentMenu$getBou = (_getParentMenu = getParentMenu(rootRef.current)) === null || _getParentMenu === void 0 ? void 0 : _getParentMenu.getBoundingClientRect(),\n          parentWidth = _getParentMenu$getBou.width;\n\n      targetBoundaries[2] -= parentWidth;\n    }\n\n    var containerBoundaries = getContainerBoundaries();\n    return [capWithinRange(targetBoundaries[0], containerBoundaries[0], containerBoundaries[2]), capWithinRange(targetBoundaries[1], containerBoundaries[1], containerBoundaries[3]), capWithinRange(targetBoundaries[2], containerBoundaries[0], containerBoundaries[2]), capWithinRange(targetBoundaries[3], containerBoundaries[1], containerBoundaries[3])];\n  }\n\n  function focusNode(node) {\n    if (node) {\n      resetFocus(rootRef.current);\n      focusNodeUtil(node);\n    }\n  }\n\n  function handleKeyDown(event) {\n    if (match(event, keys.Tab)) {\n      event.preventDefault();\n      close(event.type);\n    }\n\n    if (event.target.tagName === 'LI' && (match(event, keys.Enter) || match(event, keys.Space))) {\n      handleClick(event);\n    } else {\n      event.stopPropagation();\n    }\n\n    if (match(event, keys.Escape) || !isRootMenu && match(event, keys.ArrowLeft)) {\n      close(event.type);\n    }\n\n    var nodeToFocus;\n\n    if (event.target.tagName === 'LI') {\n      var currentNode = event.target;\n\n      if (match(event, keys.ArrowUp)) {\n        nodeToFocus = getNextNode(currentNode, -1);\n      } else if (match(event, keys.ArrowDown)) {\n        nodeToFocus = getNextNode(currentNode, 1);\n      } else if (match(event, keys.ArrowLeft)) {\n        nodeToFocus = getParentNode(currentNode);\n      }\n    } else if (event.target.tagName === 'UL') {\n      var validNodes = getValidNodes(event.target);\n\n      if (validNodes.length > 0 && match(event, keys.ArrowUp)) {\n        nodeToFocus = validNodes[validNodes.length - 1];\n      } else if (validNodes.length > 0 && match(event, keys.ArrowDown)) {\n        nodeToFocus = validNodes[0];\n      }\n    }\n\n    focusNode(nodeToFocus);\n\n    if (rest.onKeyDown) {\n      rest.onKeyDown(event);\n    }\n  }\n\n  function handleClick(event) {\n    if (!clickedElementHasSubnodes(event) && event.target.tagName !== 'UL') {\n      close(event.type);\n    } else {\n      event.stopPropagation();\n    }\n  }\n\n  function getCorrectedPosition(preferredDirection) {\n    var _rootRef$current;\n\n    var elementRect = (_rootRef$current = rootRef.current) === null || _rootRef$current === void 0 ? void 0 : _rootRef$current.getBoundingClientRect();\n    var elementDimensions = [elementRect.width, elementRect.height];\n    var targetBoundaries = getTargetBoundaries();\n    var containerBoundaries = getContainerBoundaries();\n\n    var _getPosition = getPosition(elementDimensions, targetBoundaries, containerBoundaries, preferredDirection),\n        correctedPosition = _getPosition.position,\n        correctedDirection = _getPosition.direction;\n\n    setDirection(correctedDirection);\n    return correctedPosition;\n  }\n\n  function handleBlur(event) {\n    var _rootRef$current2;\n\n    if (isRootMenu && !((_rootRef$current2 = rootRef.current) !== null && _rootRef$current2 !== void 0 && _rootRef$current2.contains(event.relatedTarget))) {\n      close(event.type);\n    }\n  }\n\n  useEffect(function () {\n    if (open) {\n      focusReturn.current = document.activeElement;\n      var localDirection = 1;\n\n      if (isRootMenu) {\n        var _rootRef$current3;\n\n        (_rootRef$current3 = rootRef.current) === null || _rootRef$current3 === void 0 ? void 0 : _rootRef$current3.focus();\n      } else {\n        var parentMenu = getParentMenu(rootRef.current);\n\n        if (parentMenu) {\n          localDirection = Number(parentMenu.dataset.direction);\n        }\n      }\n\n      var correctedPosition = getCorrectedPosition(localDirection);\n      setPosition(correctedPosition);\n    } else {\n      setPosition([0, 0]);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [open, x, y]);\n  var someNodesHaveIcons = React.Children.toArray(children).some(function (node) {\n    return node.type === MenuSelectableItem || node.type === MenuRadioGroup;\n  });\n  var options = React.Children.map(children, function (node) {\n    if ( /*#__PURE__*/React.isValidElement(node)) {\n      return /*#__PURE__*/React.cloneElement(node, {\n        indented: someNodesHaveIcons,\n        level: level\n      });\n    }\n  });\n  var classes = classnames(\"\".concat(prefix, \"--menu\"), (_classnames = {}, _defineProperty(_classnames, \"\".concat(prefix, \"--menu--open\"), open), _defineProperty(_classnames, \"\".concat(prefix, \"--menu--invisible\"), open && position[0] === 0 && position[1] === 0), _defineProperty(_classnames, \"\".concat(prefix, \"--menu--root\"), isRootMenu), _classnames), size !== defaultSize && \"\".concat(prefix, \"--menu--\").concat(size), className);\n\n  var ulAttributes = _objectSpread(_objectSpread({}, rest), {}, {\n    id: id,\n    ref: rootRef,\n    className: classes,\n    onKeyDown: handleKeyDown,\n    onClick: handleClick,\n    onBlur: handleBlur,\n    role: 'menu',\n    tabIndex: -1,\n    'data-direction': direction,\n    'data-level': level,\n    style: {\n      left: \"\".concat(position[0], \"px\"),\n      top: \"\".concat(position[1], \"px\")\n    }\n  });\n\n  var childrenToRender = options; // if the only child is a radiogroup, don't render it as radiogroup component, but\n  // only the items to prevent duplicate markup\n\n  if (options && options.length === 1 && options[0].type === MenuRadioGroup) {\n    var radioGroupProps = options[0].props;\n    ulAttributes['aria-label'] = radioGroupProps.label;\n    childrenToRender = /*#__PURE__*/React.createElement(MenuRadioGroupOptions, {\n      items: radioGroupProps.items,\n      initialSelectedItem: radioGroupProps.initialSelectedItem,\n      onChange: radioGroupProps.onChange\n    });\n  } // if the only child is a generic group, don't render it as group component, but\n  // only the children to prevent duplicate markup\n\n\n  if (options && options.length === 1 && options[0].type === MenuGroup) {\n    var groupProps = options[0].props;\n    ulAttributes['aria-label'] = groupProps.label;\n    childrenToRender = React.Children.toArray(options[0].props.children);\n  }\n\n  var menu = /*#__PURE__*/React.createElement(\"ul\", ulAttributes, childrenToRender);\n  return isRootMenu ? open && /*#__PURE__*/ReactDOM.createPortal(menu, target) || null : menu;\n};\n\nMenu.propTypes = {\n  /**\n   * Specify the children of the Menu\n   */\n  children: PropTypes.node,\n\n  /**\n   * Specify a custom className to apply to the ul node\n   */\n  className: PropTypes.string,\n\n  /**\n   * Define an ID for this menu\n   */\n  id: PropTypes.string,\n\n  /**\n   * Internal: keeps track of the nesting level of the menu\n   */\n  level: PropTypes.number,\n\n  /**\n   * Function called when the menu is closed\n   */\n  onClose: PropTypes.func,\n\n  /**\n   * Specify whether the Menu is currently open\n   */\n  open: PropTypes.bool,\n\n  /**\n   * Specify the size of the menu, from a list of available sizes.\n   */\n  size: PropTypes.oneOf(['sm', 'md', 'lg']),\n\n  /**\n   * Optionally pass an element the Menu should be appended to as a child. Defaults to document.body.\n   */\n  target: PropTypes.element,\n\n  /**\n   * Specify the x position where this menu is rendered\n   */\n  x: PropTypes.oneOfType([PropTypes.number, PropTypes.arrayOf(PropTypes.number)]),\n\n  /**\n   * Specify the y position where this menu is rendered\n   */\n  y: PropTypes.oneOfType([PropTypes.number, PropTypes.arrayOf(PropTypes.number)])\n};\nexport default Menu;"]},"metadata":{},"sourceType":"module"}