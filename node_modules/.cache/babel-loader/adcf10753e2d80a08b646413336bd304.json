{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n/**\n * Copyright IBM Corp. 2021\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport classnames from 'classnames';\nimport { settings } from 'carbon-components';\nimport Search from '../Search';\nvar prefix = settings.prefix;\n\nfunction ExpandableSearch(props) {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      expanded = _useState2[0],\n      setExpanded = _useState2[1];\n\n  var searchRef = useRef(null);\n\n  function handleFocus() {\n    if (!expanded) {\n      setExpanded(true);\n    }\n  }\n\n  function handleBlur(evt) {\n    var relatedTargetIsAllowed = evt.relatedTarget && evt.relatedTarget.classList.contains(\"\".concat(prefix, \"--search-close\"));\n\n    if (expanded && !relatedTargetIsAllowed && !searchRef.current.state.hasContent) {\n      setExpanded(false);\n    }\n  }\n\n  useEffect(function () {\n    var _searchRef$current2;\n\n    function focusInput() {\n      var _searchRef$current;\n\n      if (!expanded && (_searchRef$current = searchRef.current) !== null && _searchRef$current !== void 0 && _searchRef$current.input) {\n        searchRef.current.input.focus();\n      }\n    }\n\n    if ((_searchRef$current2 = searchRef.current) !== null && _searchRef$current2 !== void 0 && _searchRef$current2.magnifier) {\n      var magnifier = searchRef.current.magnifier;\n      magnifier.addEventListener('click', focusInput);\n      return function () {\n        magnifier.removeEventListener('click', focusInput);\n      };\n    }\n  }, [expanded, searchRef]);\n  var classes = classnames(\"\".concat(prefix, \"--search--expandable\"), _defineProperty({}, \"\".concat(prefix, \"--search--expanded\"), expanded), props.className);\n  return /*#__PURE__*/React.createElement(Search, _extends({}, props, {\n    ref: searchRef,\n    className: classes,\n    onFocus: handleFocus,\n    onBlur: handleBlur\n  }));\n}\n\nExpandableSearch.propTypes = Search.propTypes;\nexport default ExpandableSearch;","map":{"version":3,"sources":["/Users/danielcrow/Documents/development/cloudfoundry/datacap-ui/node_modules/carbon-components-react/es/components/ExpandableSearch/ExpandableSearch.js"],"names":["_extends","_defineProperty","_slicedToArray","React","useState","useRef","useEffect","classnames","settings","Search","prefix","ExpandableSearch","props","_useState","_useState2","expanded","setExpanded","searchRef","handleFocus","handleBlur","evt","relatedTargetIsAllowed","relatedTarget","classList","contains","concat","current","state","hasContent","_searchRef$current2","focusInput","_searchRef$current","input","focus","magnifier","addEventListener","removeEventListener","classes","className","createElement","ref","onFocus","onBlur","propTypes"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\n/**\n * Copyright IBM Corp. 2021\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport React, { useState, useRef, useEffect } from 'react';\nimport classnames from 'classnames';\nimport { settings } from 'carbon-components';\nimport Search from '../Search';\nvar prefix = settings.prefix;\n\nfunction ExpandableSearch(props) {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      expanded = _useState2[0],\n      setExpanded = _useState2[1];\n\n  var searchRef = useRef(null);\n\n  function handleFocus() {\n    if (!expanded) {\n      setExpanded(true);\n    }\n  }\n\n  function handleBlur(evt) {\n    var relatedTargetIsAllowed = evt.relatedTarget && evt.relatedTarget.classList.contains(\"\".concat(prefix, \"--search-close\"));\n\n    if (expanded && !relatedTargetIsAllowed && !searchRef.current.state.hasContent) {\n      setExpanded(false);\n    }\n  }\n\n  useEffect(function () {\n    var _searchRef$current2;\n\n    function focusInput() {\n      var _searchRef$current;\n\n      if (!expanded && (_searchRef$current = searchRef.current) !== null && _searchRef$current !== void 0 && _searchRef$current.input) {\n        searchRef.current.input.focus();\n      }\n    }\n\n    if ((_searchRef$current2 = searchRef.current) !== null && _searchRef$current2 !== void 0 && _searchRef$current2.magnifier) {\n      var magnifier = searchRef.current.magnifier;\n      magnifier.addEventListener('click', focusInput);\n      return function () {\n        magnifier.removeEventListener('click', focusInput);\n      };\n    }\n  }, [expanded, searchRef]);\n  var classes = classnames(\"\".concat(prefix, \"--search--expandable\"), _defineProperty({}, \"\".concat(prefix, \"--search--expanded\"), expanded), props.className);\n  return /*#__PURE__*/React.createElement(Search, _extends({}, props, {\n    ref: searchRef,\n    className: classes,\n    onFocus: handleFocus,\n    onBlur: handleBlur\n  }));\n}\n\nExpandableSearch.propTypes = Search.propTypes;\nexport default ExpandableSearch;"]},"metadata":{},"sourceType":"module"}