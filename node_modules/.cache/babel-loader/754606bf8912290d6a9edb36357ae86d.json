{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nvar _excluded = [\"children\", \"disabled\", \"indented\", \"kind\", \"label\", \"level\", \"onClick\", \"renderIcon\", \"shortcut\"];\n/**\n * Copyright IBM Corp. 2020\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport { settings } from 'carbon-components';\nimport { CaretRight16 } from '@carbon/icons-react';\nimport { keys, match } from '../../internal/keyboard';\nimport { getFirstSubNode, focusNode, getParentMenu, clickedElementHasSubnodes } from './_utils';\nimport Menu from './Menu';\nvar prefix = settings.prefix;\nvar hoverIntentDelay = 150; // in ms\n\nfunction MenuOptionContent(_ref) {\n  var label = _ref.label,\n      info = _ref.info,\n      disabled = _ref.disabled,\n      Icon = _ref.icon,\n      indented = _ref.indented;\n  var classes = classnames(\"\".concat(prefix, \"--menu-option__content\"), _defineProperty({}, \"\".concat(prefix, \"--menu-option__content--disabled\"), disabled));\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes\n  }, indented && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefix, \"--menu-option__icon\")\n  }, Icon && /*#__PURE__*/React.createElement(Icon, null)), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"\".concat(prefix, \"--menu-option__label\"),\n    title: label\n  }, label), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefix, \"--menu-option__info\")\n  }, info));\n}\n\nfunction MenuOption(_ref2) {\n  var _classnames2;\n\n  var children = _ref2.children,\n      disabled = _ref2.disabled,\n      indented = _ref2.indented,\n      _ref2$kind = _ref2.kind,\n      kind = _ref2$kind === void 0 ? 'default' : _ref2$kind,\n      label = _ref2.label,\n      level = _ref2.level,\n      _ref2$onClick = _ref2.onClick,\n      onClick = _ref2$onClick === void 0 ? function () {} : _ref2$onClick,\n      renderIcon = _ref2.renderIcon,\n      shortcut = _ref2.shortcut,\n      rest = _objectWithoutProperties(_ref2, _excluded);\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      submenuOpen = _useState2[0],\n      setSubmenuOpen = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      submenuOpenedByKeyboard = _useState4[0],\n      setSubmenuOpenedByKeyboard = _useState4[1];\n\n  var rootRef = useRef(null);\n  var hoverIntentTimeout = useRef(null);\n  var subOptions = React.Children.map(children, function (node) {\n    if ( /*#__PURE__*/React.isValidElement(node)) {\n      return /*#__PURE__*/React.cloneElement(node);\n    }\n  });\n\n  function openSubmenu() {\n    var openedByKeyboard = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    setSubmenuOpenedByKeyboard(openedByKeyboard);\n    setSubmenuOpen(true);\n  }\n\n  function handleKeyDown(event) {\n    if (clickedElementHasSubnodes(event) && (match(event, keys.ArrowRight) || match(event, keys.Enter) || match(event, keys.Space))) {\n      openSubmenu(true);\n    } else if ((match(event, keys.Enter) || match(event, keys.Space)) && onClick) {\n      onClick(event);\n    }\n  }\n\n  function handleMouseEnter() {\n    hoverIntentTimeout.current = setTimeout(openSubmenu, hoverIntentDelay);\n  }\n\n  function handleMouseLeave() {\n    clearTimeout(hoverIntentTimeout === null || hoverIntentTimeout === void 0 ? void 0 : hoverIntentTimeout.current);\n    setSubmenuOpen(false);\n  }\n\n  function getSubmenuPosition() {\n    var pos = [0, 0];\n\n    if (subOptions) {\n      var parentMenu = getParentMenu(rootRef === null || rootRef === void 0 ? void 0 : rootRef.current);\n\n      if (parentMenu) {\n        var _parentMenu$getBoundi = parentMenu.getBoundingClientRect(),\n            x = _parentMenu$getBoundi.x,\n            width = _parentMenu$getBoundi.width;\n\n        var _rootRef$current$getB = rootRef.current.getBoundingClientRect(),\n            y = _rootRef$current$getB.y;\n\n        pos[0] = x + width;\n        pos[1] = y;\n      }\n    }\n\n    return pos;\n  }\n\n  useEffect(function () {\n    if (subOptions && submenuOpenedByKeyboard) {\n      var firstSubnode = getFirstSubNode(rootRef === null || rootRef === void 0 ? void 0 : rootRef.current);\n      focusNode(firstSubnode);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [submenuOpen]);\n  var classes = classnames(\"\".concat(prefix, \"--menu-option\"), (_classnames2 = {}, _defineProperty(_classnames2, \"\".concat(prefix, \"--menu-option--disabled\"), disabled), _defineProperty(_classnames2, \"\".concat(prefix, \"--menu-option--active\"), subOptions && submenuOpen), _defineProperty(_classnames2, \"\".concat(prefix, \"--menu-option--danger\"), !subOptions && kind === 'danger'), _classnames2));\n  var allowedRoles = ['menuitemradio', 'menuitemcheckbox'];\n  var role = rest.role && allowedRoles.includes(rest.role) ? rest.role : 'menuitem';\n  var submenuPosition = getSubmenuPosition();\n  return (\n    /*#__PURE__*/\n    // role is either menuitemradio, menuitemcheckbox, or menuitem which are all interactive\n    // eslint-disable-next-line jsx-a11y/no-noninteractive-element-interactions\n    React.createElement(\"li\", _extends({}, rest, {\n      ref: rootRef,\n      className: classes,\n      role: role,\n      tabIndex: -1,\n      \"aria-disabled\": !subOptions && disabled,\n      \"aria-haspopup\": subOptions ? true : null,\n      \"aria-expanded\": subOptions ? submenuOpen : null,\n      onKeyDown: handleKeyDown,\n      onMouseEnter: subOptions ? handleMouseEnter : null,\n      onMouseLeave: subOptions ? handleMouseLeave : null,\n      onClick: onClick\n    }), subOptions ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(MenuOptionContent, {\n      label: label,\n      icon: renderIcon,\n      info: /*#__PURE__*/React.createElement(CaretRight16, null),\n      indented: indented\n    }), /*#__PURE__*/React.createElement(Menu, {\n      level: level + 1,\n      open: submenuOpen,\n      onClose: function onClose() {\n        setSubmenuOpen(false);\n      },\n      x: submenuPosition[0],\n      y: submenuPosition[1]\n    }, subOptions)) : /*#__PURE__*/React.createElement(MenuOptionContent, {\n      label: label,\n      disabled: disabled,\n      icon: renderIcon,\n      info: shortcut,\n      indented: indented\n    }))\n  );\n}\n\nMenuOptionContent.propTypes = {\n  /**\n   * Whether this option is disabled\n   */\n  disabled: PropTypes.bool,\n\n  /**\n   * Icon that is displayed in front of the option\n   */\n  icon: PropTypes.oneOfType([PropTypes.func, PropTypes.object]),\n\n  /**\n   * Whether the content should be indented\n   */\n  indented: PropTypes.bool,\n\n  /**\n   * Additional information such as shortcut or caret\n   */\n  info: PropTypes.node,\n\n  /**\n   * Rendered label for the MenuOptionContent\n   */\n  label: PropTypes.node.isRequired\n};\nMenuOption.propTypes = {\n  /**\n   * Specify the children of the MenuOption\n   */\n  children: PropTypes.node,\n\n  /**\n   * Specify whether this MenuOption is disabled\n   */\n  disabled: PropTypes.bool,\n\n  /**\n   * Whether the content should be indented (for example because it's in a group with options that have icons).\n   * Is automatically set by Menu\n   */\n  indented: PropTypes.bool,\n\n  /**\n   * Optional prop to specify the kind of the MenuOption\n   */\n  kind: PropTypes.oneOf(['default', 'danger']),\n\n  /**\n   * Rendered label for the MenuOption\n   */\n  label: PropTypes.node.isRequired,\n\n  /**\n   * Which nested level this option is located in.\n   * Is automatically set by Menu\n   */\n  level: PropTypes.number,\n\n  /**\n   * The onClick handler\n   */\n  onClick: PropTypes.func,\n\n  /**\n   * Rendered icon for the MenuOption.\n   * Can be a React component class\n   */\n  renderIcon: PropTypes.oneOfType([PropTypes.func, PropTypes.object]),\n\n  /**\n   * Rendered shortcut for the MenuOption\n   */\n  shortcut: PropTypes.node\n};\nexport default MenuOption;","map":{"version":3,"sources":["/Users/danielcrow/Documents/development/cloudfoundry/capture/capture-ui/node_modules/carbon-components-react/es/components/Menu/MenuOption.js"],"names":["_extends","_slicedToArray","_objectWithoutProperties","_defineProperty","_excluded","React","useState","useRef","useEffect","PropTypes","classnames","settings","CaretRight16","keys","match","getFirstSubNode","focusNode","getParentMenu","clickedElementHasSubnodes","Menu","prefix","hoverIntentDelay","MenuOptionContent","_ref","label","info","disabled","Icon","icon","indented","classes","concat","createElement","className","title","MenuOption","_ref2","_classnames2","children","_ref2$kind","kind","level","_ref2$onClick","onClick","renderIcon","shortcut","rest","_useState","_useState2","submenuOpen","setSubmenuOpen","_useState3","_useState4","submenuOpenedByKeyboard","setSubmenuOpenedByKeyboard","rootRef","hoverIntentTimeout","subOptions","Children","map","node","isValidElement","cloneElement","openSubmenu","openedByKeyboard","arguments","length","undefined","handleKeyDown","event","ArrowRight","Enter","Space","handleMouseEnter","current","setTimeout","handleMouseLeave","clearTimeout","getSubmenuPosition","pos","parentMenu","_parentMenu$getBoundi","getBoundingClientRect","x","width","_rootRef$current$getB","y","firstSubnode","allowedRoles","role","includes","submenuPosition","ref","tabIndex","onKeyDown","onMouseEnter","onMouseLeave","Fragment","open","onClose","propTypes","bool","oneOfType","func","object","isRequired","oneOf","number"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nvar _excluded = [\"children\", \"disabled\", \"indented\", \"kind\", \"label\", \"level\", \"onClick\", \"renderIcon\", \"shortcut\"];\n\n/**\n * Copyright IBM Corp. 2020\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport React, { useState, useRef, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport { settings } from 'carbon-components';\nimport { CaretRight16 } from '@carbon/icons-react';\nimport { keys, match } from '../../internal/keyboard';\nimport { getFirstSubNode, focusNode, getParentMenu, clickedElementHasSubnodes } from './_utils';\nimport Menu from './Menu';\nvar prefix = settings.prefix;\nvar hoverIntentDelay = 150; // in ms\n\nfunction MenuOptionContent(_ref) {\n  var label = _ref.label,\n      info = _ref.info,\n      disabled = _ref.disabled,\n      Icon = _ref.icon,\n      indented = _ref.indented;\n  var classes = classnames(\"\".concat(prefix, \"--menu-option__content\"), _defineProperty({}, \"\".concat(prefix, \"--menu-option__content--disabled\"), disabled));\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes\n  }, indented && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefix, \"--menu-option__icon\")\n  }, Icon && /*#__PURE__*/React.createElement(Icon, null)), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"\".concat(prefix, \"--menu-option__label\"),\n    title: label\n  }, label), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefix, \"--menu-option__info\")\n  }, info));\n}\n\nfunction MenuOption(_ref2) {\n  var _classnames2;\n\n  var children = _ref2.children,\n      disabled = _ref2.disabled,\n      indented = _ref2.indented,\n      _ref2$kind = _ref2.kind,\n      kind = _ref2$kind === void 0 ? 'default' : _ref2$kind,\n      label = _ref2.label,\n      level = _ref2.level,\n      _ref2$onClick = _ref2.onClick,\n      onClick = _ref2$onClick === void 0 ? function () {} : _ref2$onClick,\n      renderIcon = _ref2.renderIcon,\n      shortcut = _ref2.shortcut,\n      rest = _objectWithoutProperties(_ref2, _excluded);\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      submenuOpen = _useState2[0],\n      setSubmenuOpen = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      submenuOpenedByKeyboard = _useState4[0],\n      setSubmenuOpenedByKeyboard = _useState4[1];\n\n  var rootRef = useRef(null);\n  var hoverIntentTimeout = useRef(null);\n  var subOptions = React.Children.map(children, function (node) {\n    if ( /*#__PURE__*/React.isValidElement(node)) {\n      return /*#__PURE__*/React.cloneElement(node);\n    }\n  });\n\n  function openSubmenu() {\n    var openedByKeyboard = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    setSubmenuOpenedByKeyboard(openedByKeyboard);\n    setSubmenuOpen(true);\n  }\n\n  function handleKeyDown(event) {\n    if (clickedElementHasSubnodes(event) && (match(event, keys.ArrowRight) || match(event, keys.Enter) || match(event, keys.Space))) {\n      openSubmenu(true);\n    } else if ((match(event, keys.Enter) || match(event, keys.Space)) && onClick) {\n      onClick(event);\n    }\n  }\n\n  function handleMouseEnter() {\n    hoverIntentTimeout.current = setTimeout(openSubmenu, hoverIntentDelay);\n  }\n\n  function handleMouseLeave() {\n    clearTimeout(hoverIntentTimeout === null || hoverIntentTimeout === void 0 ? void 0 : hoverIntentTimeout.current);\n    setSubmenuOpen(false);\n  }\n\n  function getSubmenuPosition() {\n    var pos = [0, 0];\n\n    if (subOptions) {\n      var parentMenu = getParentMenu(rootRef === null || rootRef === void 0 ? void 0 : rootRef.current);\n\n      if (parentMenu) {\n        var _parentMenu$getBoundi = parentMenu.getBoundingClientRect(),\n            x = _parentMenu$getBoundi.x,\n            width = _parentMenu$getBoundi.width;\n\n        var _rootRef$current$getB = rootRef.current.getBoundingClientRect(),\n            y = _rootRef$current$getB.y;\n\n        pos[0] = x + width;\n        pos[1] = y;\n      }\n    }\n\n    return pos;\n  }\n\n  useEffect(function () {\n    if (subOptions && submenuOpenedByKeyboard) {\n      var firstSubnode = getFirstSubNode(rootRef === null || rootRef === void 0 ? void 0 : rootRef.current);\n      focusNode(firstSubnode);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [submenuOpen]);\n  var classes = classnames(\"\".concat(prefix, \"--menu-option\"), (_classnames2 = {}, _defineProperty(_classnames2, \"\".concat(prefix, \"--menu-option--disabled\"), disabled), _defineProperty(_classnames2, \"\".concat(prefix, \"--menu-option--active\"), subOptions && submenuOpen), _defineProperty(_classnames2, \"\".concat(prefix, \"--menu-option--danger\"), !subOptions && kind === 'danger'), _classnames2));\n  var allowedRoles = ['menuitemradio', 'menuitemcheckbox'];\n  var role = rest.role && allowedRoles.includes(rest.role) ? rest.role : 'menuitem';\n  var submenuPosition = getSubmenuPosition();\n  return (\n    /*#__PURE__*/\n    // role is either menuitemradio, menuitemcheckbox, or menuitem which are all interactive\n    // eslint-disable-next-line jsx-a11y/no-noninteractive-element-interactions\n    React.createElement(\"li\", _extends({}, rest, {\n      ref: rootRef,\n      className: classes,\n      role: role,\n      tabIndex: -1,\n      \"aria-disabled\": !subOptions && disabled,\n      \"aria-haspopup\": subOptions ? true : null,\n      \"aria-expanded\": subOptions ? submenuOpen : null,\n      onKeyDown: handleKeyDown,\n      onMouseEnter: subOptions ? handleMouseEnter : null,\n      onMouseLeave: subOptions ? handleMouseLeave : null,\n      onClick: onClick\n    }), subOptions ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(MenuOptionContent, {\n      label: label,\n      icon: renderIcon,\n      info: /*#__PURE__*/React.createElement(CaretRight16, null),\n      indented: indented\n    }), /*#__PURE__*/React.createElement(Menu, {\n      level: level + 1,\n      open: submenuOpen,\n      onClose: function onClose() {\n        setSubmenuOpen(false);\n      },\n      x: submenuPosition[0],\n      y: submenuPosition[1]\n    }, subOptions)) : /*#__PURE__*/React.createElement(MenuOptionContent, {\n      label: label,\n      disabled: disabled,\n      icon: renderIcon,\n      info: shortcut,\n      indented: indented\n    }))\n  );\n}\n\nMenuOptionContent.propTypes = {\n  /**\n   * Whether this option is disabled\n   */\n  disabled: PropTypes.bool,\n\n  /**\n   * Icon that is displayed in front of the option\n   */\n  icon: PropTypes.oneOfType([PropTypes.func, PropTypes.object]),\n\n  /**\n   * Whether the content should be indented\n   */\n  indented: PropTypes.bool,\n\n  /**\n   * Additional information such as shortcut or caret\n   */\n  info: PropTypes.node,\n\n  /**\n   * Rendered label for the MenuOptionContent\n   */\n  label: PropTypes.node.isRequired\n};\nMenuOption.propTypes = {\n  /**\n   * Specify the children of the MenuOption\n   */\n  children: PropTypes.node,\n\n  /**\n   * Specify whether this MenuOption is disabled\n   */\n  disabled: PropTypes.bool,\n\n  /**\n   * Whether the content should be indented (for example because it's in a group with options that have icons).\n   * Is automatically set by Menu\n   */\n  indented: PropTypes.bool,\n\n  /**\n   * Optional prop to specify the kind of the MenuOption\n   */\n  kind: PropTypes.oneOf(['default', 'danger']),\n\n  /**\n   * Rendered label for the MenuOption\n   */\n  label: PropTypes.node.isRequired,\n\n  /**\n   * Which nested level this option is located in.\n   * Is automatically set by Menu\n   */\n  level: PropTypes.number,\n\n  /**\n   * The onClick handler\n   */\n  onClick: PropTypes.func,\n\n  /**\n   * Rendered icon for the MenuOption.\n   * Can be a React component class\n   */\n  renderIcon: PropTypes.oneOfType([PropTypes.func, PropTypes.object]),\n\n  /**\n   * Rendered shortcut for the MenuOption\n   */\n  shortcut: PropTypes.node\n};\nexport default MenuOption;"]},"metadata":{},"sourceType":"module"}