{"ast":null,"code":"import _classCallCheck from\"/Users/danielcrow/Documents/development/cloudfoundry/capture/capture-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/danielcrow/Documents/development/cloudfoundry/capture/capture-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/danielcrow/Documents/development/cloudfoundry/capture/capture-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/danielcrow/Documents/development/cloudfoundry/capture/capture-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/danielcrow/Documents/development/cloudfoundry/capture/capture-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import UploadService from\"../../services/upload-files.service\";import FileViewer from'react-file-viewer';import{Button,FileUploaderDropContainer,Breadcrumb,BreadcrumbItem,InlineLoading}from'carbon-components-react';import ResultsList from'./ResultsList';import{WarningFilled16}from'@carbon/icons-react';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var UploadFiles=/*#__PURE__*/function(_Component){_inherits(UploadFiles,_Component);var _super=_createSuper(UploadFiles);function UploadFiles(props){var _this;_classCallCheck(this,UploadFiles);_this=_super.call(this,props);_this.selectFile=_this.selectFile.bind(_assertThisInitialized(_this));_this.upload=_this.upload.bind(_assertThisInitialized(_this));_this.state={selectedFiles:undefined,currentFile:undefined,progress:0,message:\"Please Upload Your Document\",results:[],docUrls:[{fileData:''}],fileInfos:[],docUrl:undefined,docStatus:\"Begin\"};return _this;}_createClass(UploadFiles,[{key:\"selectFile\",value:function selectFile(event){var _this2=this;//console.log(event.target.files)\nvar thepage=this.props.page;this.setState({selectedFiles:event.target.files});var currentFile=event.target.files[0];UploadService.upload(currentFile,thepage,function(event){_this2.setState({progress:Math.round(100*event.loaded/event.total)});}).then(function(response){console.log(response.data.transactionalId);var getImagePath=URL.createObjectURL(currentFile);console.log(getImagePath);_this2.setState({transactionalId:response.data.transactionalId,message:\"Uploaded Document\",docUrl:\"/api/documentunderstanding/getdoc/\"+response.data.transactionalId+\"/pdf\"});});}},{key:\"upload\",value:function upload(){var _this3=this;var currentFile=this.state.selectedFiles[0];var application=this.props.application;var workflow=this.props.workflow;var rules=this.props.rules;console.log(\"upload\"+this.state.transactionalId);this.setState({docStatus:\"Processing\"});UploadService.executeRules(this.state.transactionalId,application,workflow,rules,function(event){_this3.setState({progress:Math.round(100*event.loaded/event.total)});}).then(function(response){console.log(response.data);_this3.setState({results:response.data.values,message:\"Document Processed\",transactionId:response.data.transactionalId,docStatus:\"Done\"});console.log(_this3.state);return\"stuff\";});this.setState({selectedFiles:undefined});}},{key:\"render\",value:function render(){var _this$state=this.state,selectedFiles=_this$state.selectedFiles,currentFile=_this$state.currentFile,progress=_this$state.progress,message=_this$state.message,fileInfos=_this$state.fileInfos;return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{class:\"bx--grid--full-width\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"bx--row\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"bx--col-lg-16 bx--col-md-8 bx--col-sm-4\",children:[/*#__PURE__*/_jsx(Breadcrumb,{\"aria-label\":\"Page navigation\",children:/*#__PURE__*/_jsx(BreadcrumbItem,{children:/*#__PURE__*/_jsxs(\"a\",{href:\"/\",children:[this.props.workflow,\":\",this.props.page,\":\",this.props.application,\":\",this.props.rules]})})}),/*#__PURE__*/_jsx(\"h1\",{className:\"landing-page__heading\",children:this.state.message})]})}),/*#__PURE__*/_jsx(\"div\",{class:\"bx--row\",children:/*#__PURE__*/_jsx(\"div\",{class:\"bx--col-lg-16 bx--col-md-8 bx--col-sm-4\",children:/*#__PURE__*/_jsx(FileUploaderDropContainer,{accept:['.jpg','.pdf'],onAddFiles:this.selectFile,buttonKind:\"primary\",buttonLabel:\"Add files\",filenameStatus:\"edit\",iconDescription:\"Clear file\",labelText:\"Add File to this container\",class:\"fileuploader-dcap\"})})}),/*#__PURE__*/_jsx(\"div\",{class:\"bx--row\",children:/*#__PURE__*/_jsx(\"div\",{class:\"bx--col-lg-16 bx--col-md-8 bx--col-sm-4\",children:/*#__PURE__*/_jsx(Button,{disabled:!selectedFiles,onClick:this.upload,children:\"Process Document\"})})}),/*#__PURE__*/_jsxs(\"div\",{class:\"bx--row\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"bx--col-lg-12 bx--col-md-6 bx--col-sm-1\",children:[this.state.docStatus==\"Processing\"&&/*#__PURE__*/_jsx(InlineLoading,{description:\"Processing...\"}),this.state.message==\"Document Processed\"&&/*#__PURE__*/_jsx(ResultsList,{results:this.state.results})]}),/*#__PURE__*/_jsx(\"div\",{class:\"bx--col-lg-4 bx--col-md-2 bx--col-sm-1\",children:this.state.docUrl!=undefined&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(FileViewer,{fileType:\"pdf\",filePath:this.state.docUrl})})})]})]})});}}]);return UploadFiles;}(Component);export{UploadFiles as default};","map":{"version":3,"sources":["/Users/danielcrow/Documents/development/cloudfoundry/capture/capture-ui/src/components/DocumentUnderstanding/DocumentUnderstanding.js"],"names":["React","Component","UploadService","FileViewer","Button","FileUploaderDropContainer","Breadcrumb","BreadcrumbItem","InlineLoading","ResultsList","WarningFilled16","UploadFiles","props","selectFile","bind","upload","state","selectedFiles","undefined","currentFile","progress","message","results","docUrls","fileData","fileInfos","docUrl","docStatus","event","thepage","page","setState","target","files","Math","round","loaded","total","then","response","console","log","data","transactionalId","getImagePath","URL","createObjectURL","application","workflow","rules","executeRules","values","transactionId"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport UploadService from \"../../services/upload-files.service\";\nimport FileViewer from 'react-file-viewer';\nimport { Button,FileUploaderDropContainer,Breadcrumb,BreadcrumbItem,InlineLoading } from 'carbon-components-react';\nimport ResultsList from './ResultsList'\nimport { WarningFilled16 } from '@carbon/icons-react';\n\nexport default class UploadFiles extends Component {\n  constructor(props) {\n    super(props);\n    this.selectFile = this.selectFile.bind(this);\n    this.upload = this.upload.bind(this);\n\n    this.state = {\n      selectedFiles: undefined,\n      currentFile: undefined,\n      progress: 0,\n      message: \"Please Upload Your Document\",\n      results: [],\n      docUrls: [ { fileData: '' } ],\n      fileInfos: [],\n      docUrl: undefined,\n      docStatus: \"Begin\"\n    };\n  }\n\n  selectFile(event) {\n    //console.log(event.target.files)\n    let thepage = this.props.page\n    this.setState({\n      selectedFiles: event.target.files,\n    });\n    let currentFile = event.target.files[0];\n    UploadService.upload(currentFile,thepage, (event) => {\n      this.setState({\n        progress: Math.round((100 * event.loaded) / event.total),\n      });\n    }).then((response) => {\n        console.log(response.data.transactionalId);\n        var getImagePath = URL.createObjectURL(currentFile);\n        console.log(getImagePath);\n        this.setState({\n            transactionalId: response.data.transactionalId,\n            message: \"Uploaded Document\",\n            docUrl: \"/api/documentunderstanding/getdoc/\" + response.data.transactionalId+ \"/pdf\"\n        })\n      })\n\n\n\n\n\n  }\n\n  upload() {\n    let currentFile = this.state.selectedFiles[0];\n    let application = this.props.application\n    let workflow = this.props.workflow\n    let rules = this.props.rules\n    console.log(\"upload\" + this.state.transactionalId);\n    this.setState({\n      docStatus: \"Processing\",\n    });\n    UploadService.executeRules(this.state.transactionalId,application,workflow,rules,(event) =>{\n        this.setState({\n        progress: Math.round((100 * event.loaded) / event.total),\n      });\n    }).then((response)=>{\n      console.log(response.data)\n\n      this.setState({\n        results: response.data.values,\n        message: \"Document Processed\",\n        transactionId: response.data.transactionalId,\n        docStatus: \"Done\"\n      });\n      console.log(this.state);\n      return \"stuff\"\n    })\n\n    this.setState({\n      selectedFiles: undefined,\n    });\n  }\n\n\n\n  render() {\n    const {\n      selectedFiles,\n      currentFile,\n      progress,\n      message,\n      fileInfos,\n    } = this.state;\n\n    return (\n  <div>\n\n  <div class=\"bx--grid--full-width\">\n    <div class=\"bx--row\">\n      <div class=\"bx--col-lg-16 bx--col-md-8 bx--col-sm-4\">\n      <Breadcrumb aria-label=\"Page navigation\">\n        <BreadcrumbItem>\n          <a href=\"/\">{this.props.workflow}:{this.props.page}:{this.props.application}:{this.props.rules}</a>\n          </BreadcrumbItem>\n          </Breadcrumb>\n        <h1 className=\"landing-page__heading\">{this.state.message}</h1>\n      </div>\n    </div>\n    <div class=\"bx--row\">\n      <div class=\"bx--col-lg-16 bx--col-md-8 bx--col-sm-4\">\n        <FileUploaderDropContainer\n          accept={[\n            '.jpg',\n            '.pdf'\n          ]}\n          onAddFiles={this.selectFile}\n          buttonKind=\"primary\"\n          buttonLabel=\"Add files\"\n          filenameStatus=\"edit\"\n          iconDescription=\"Clear file\"\n          labelText=\"Add File to this container\"\n          class=\"fileuploader-dcap\"\n          ></FileUploaderDropContainer>\n\n      </div>\n    </div>\n    <div class=\"bx--row\">\n      <div class=\"bx--col-lg-16 bx--col-md-8 bx--col-sm-4\">\n       <Button disabled={!selectedFiles} onClick={this.upload} >\n         Process Document\n         </Button>\n      </div>\n    </div>\n    <div class=\"bx--row\">\n      <div class=\"bx--col-lg-12 bx--col-md-6 bx--col-sm-1\">\n        {this.state.docStatus==\"Processing\" &&\n          <InlineLoading description=\"Processing...\" />\n        }\n        {this.state.message==\"Document Processed\" &&\n\n          <ResultsList results={this.state.results} />\n\n        }\n      </div>\n      <div class=\"bx--col-lg-4 bx--col-md-2 bx--col-sm-1\">\n      {this.state.docUrl != undefined  &&\n        <div>\n\n       <FileViewer fileType=\"pdf\" filePath={this.state.docUrl} />\n       </div>\n      }\n      </div>\n\n\n    </div>\n  </div>\n\n\n\n\n\n\n\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}