{"ast":null,"code":"var _jsxFileName = \"/Users/danielcrow/Documents/development/cloudfoundry/capture/capture-ui/src/components/DocumentUnderstanding/DocumentUnderstanding.js\";\nimport React, { Component } from \"react\";\nimport UploadService from \"../../services/upload-files.service\";\nimport FileViewer from 'react-file-viewer';\nimport { Button, FileUploader, Breadcrumb, BreadcrumbItem } from 'carbon-components-react';\nimport ResultsList from './ResultsList';\nimport { WarningFilled16 } from '@carbon/icons-react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class UploadFiles extends Component {\n  constructor(props) {\n    super(props);\n    this.selectFile = this.selectFile.bind(this);\n    this.upload = this.upload.bind(this);\n    this.state = {\n      selectedFiles: undefined,\n      currentFile: undefined,\n      progress: 0,\n      message: \"Please Upload Your Document\",\n      results: [],\n      docUrls: [{\n        fileData: ''\n      }],\n      fileInfos: [],\n      docUrl: undefined\n    };\n  }\n\n  selectFile(event) {\n    console.log(event.target.files);\n    this.setState({\n      selectedFiles: event.target.files\n    });\n  }\n\n  upload() {\n    let currentFile = this.state.selectedFiles[0];\n    this.setState({\n      progress: 0,\n      currentFile: currentFile\n    });\n    UploadService.upload(currentFile, event => {\n      this.setState({\n        progress: Math.round(100 * event.loaded / event.total)\n      });\n    }).then(response => {\n      console.log(response.data.transactionalId);\n      var getImagePath = URL.createObjectURL(currentFile);\n      console.log(getImagePath);\n      this.setState({\n        message: \"Uploaded Document, Now Processing.....\",\n        docUrl: \"http://localhost:3001/api/documentunderstanding/getdoc/\" + response.data.transactionalId + \"/pdf\"\n      });\n      UploadService.executeRules(response.data.transactionalId, event => {\n        this.setState({\n          progress: Math.round(100 * event.loaded / event.total)\n        });\n      }).then(response => {\n        console.log(response.data);\n        this.setState({\n          results: response.data.values,\n          message: \"Document Processed\",\n          transactionId: response.data.transactionalId,\n          docUrl: \"http://localhost:3001/api/documentunderstanding/getdoc/\" + response.data.transactionalId + \"/pdf\"\n        });\n        console.log(this.state);\n        return \"stuff\";\n      });\n    }).catch(() => {\n      this.setState({\n        progress: 0,\n        message: \"Could not upload the file!\",\n        currentFile: undefined\n      });\n    });\n    this.setState({\n      selectedFiles: undefined\n    });\n  }\n\n  render() {\n    const {\n      selectedFiles,\n      currentFile,\n      progress,\n      message,\n      fileInfos\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"bx--grid--full-width\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"bx--row\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"bx--col-lg-16\",\n            children: [/*#__PURE__*/_jsxDEV(Breadcrumb, {\n              \"aria-label\": \"Page navigation\",\n              children: /*#__PURE__*/_jsxDEV(BreadcrumbItem, {\n                children: /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: \"/\",\n                  children: \"Getting started\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 102,\n                  columnNumber: 11\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 101,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 7\n            }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"landing-page__heading\",\n              children: this.state.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 9\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"bx--row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"bx--col-lg-15 bx--col-md-7 bx--col-sm-3\",\n            children: [/*#__PURE__*/_jsxDEV(FileUploader, {\n              accept: ['.jpg', '.pdf'],\n              onChange: this.selectFile,\n              buttonKind: \"primary\",\n              buttonLabel: \"Add files\",\n              filenameStatus: \"edit\",\n              iconDescription: \"Clear file\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              disabled: !selectedFiles,\n              onClick: this.upload,\n              children: \"Process Document\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 11\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 5\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"bx--col-sm-1 bx--col-md-1 bx--col-lg-1\",\n            children: [\"1\", /*#__PURE__*/_jsxDEV(Button, {\n              disabled: !selectedFiles,\n              onClick: this.upload,\n              children: \"Process Document\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 128,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 8\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"bx--row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"bx--col\",\n            children: \"2 of 4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"bx--col\",\n            children: \"3 of 4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"bx--col\",\n            children: \"4 of 4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 3\n      }, this), this.state.message == \"Document Processed\" && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(ResultsList, {\n          results: this.state.results\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 7\n      }, this), this.state.docUrl != undefined && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(FileViewer, {\n          fileType: \"pdf\",\n          filePath: this.state.docUrl\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 10\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 3\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/danielcrow/Documents/development/cloudfoundry/capture/capture-ui/src/components/DocumentUnderstanding/DocumentUnderstanding.js"],"names":["React","Component","UploadService","FileViewer","Button","FileUploader","Breadcrumb","BreadcrumbItem","ResultsList","WarningFilled16","UploadFiles","constructor","props","selectFile","bind","upload","state","selectedFiles","undefined","currentFile","progress","message","results","docUrls","fileData","fileInfos","docUrl","event","console","log","target","files","setState","Math","round","loaded","total","then","response","data","transactionalId","getImagePath","URL","createObjectURL","executeRules","values","transactionId","catch","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport UploadService from \"../../services/upload-files.service\";\nimport FileViewer from 'react-file-viewer';\nimport { Button,FileUploader,Breadcrumb,BreadcrumbItem } from 'carbon-components-react';\nimport ResultsList from './ResultsList'\nimport { WarningFilled16 } from '@carbon/icons-react';\n\nexport default class UploadFiles extends Component {\n  constructor(props) {\n    super(props);\n    this.selectFile = this.selectFile.bind(this);\n    this.upload = this.upload.bind(this);\n\n    this.state = {\n      selectedFiles: undefined,\n      currentFile: undefined,\n      progress: 0,\n      message: \"Please Upload Your Document\",\n      results: [],\n      docUrls: [ { fileData: '' } ],\n      fileInfos: [],\n      docUrl: undefined\n    };\n  }\n\n  selectFile(event) {\n    console.log(event.target.files)\n    this.setState({\n      selectedFiles: event.target.files,\n    });\n  }\n\n  upload() {\n    let currentFile = this.state.selectedFiles[0];\n\n    this.setState({\n      progress: 0,\n      currentFile: currentFile,\n    });\n\n    UploadService.upload(currentFile, (event) => {\n      this.setState({\n        progress: Math.round((100 * event.loaded) / event.total),\n      });\n    }).then((response) => {\n        console.log(response.data.transactionalId);\n        var getImagePath = URL.createObjectURL(currentFile);\n        console.log(getImagePath);\n        this.setState({\n            message: \"Uploaded Document, Now Processing.....\",\n            docUrl: \"http://localhost:3001/api/documentunderstanding/getdoc/\" + response.data.transactionalId+ \"/pdf\"\n        })\n        UploadService.executeRules(response.data.transactionalId,(event) =>{\n            this.setState({\n            progress: Math.round((100 * event.loaded) / event.total),\n          });\n        }).then((response)=>{\n          console.log(response.data)\n\n          this.setState({\n            results: response.data.values,\n            message: \"Document Processed\",\n            transactionId: response.data.transactionalId,\n            docUrl: \"http://localhost:3001/api/documentunderstanding/getdoc/\" + response.data.transactionalId+ \"/pdf\"\n          });\n          console.log(this.state);\n          return \"stuff\"\n        })\n      })\n      .catch(() => {\n        this.setState({\n          progress: 0,\n          message: \"Could not upload the file!\",\n          currentFile: undefined,\n        });\n      });\n\n    this.setState({\n      selectedFiles: undefined,\n    });\n  }\n\n\n\n  render() {\n    const {\n      selectedFiles,\n      currentFile,\n      progress,\n      message,\n      fileInfos,\n    } = this.state;\n\n    return (\n  <div>\n\n  <div class=\"bx--grid--full-width\">\n    <div class=\"bx--row\">\n      <div class=\"bx--col-lg-16\">\n      <Breadcrumb aria-label=\"Page navigation\">\n        <BreadcrumbItem>\n          <a href=\"/\">Getting started</a>\n          </BreadcrumbItem>\n          </Breadcrumb>\n        <h1 className=\"landing-page__heading\">{this.state.message}</h1>\n      </div>\n    </div>\n    <div class=\"bx--row\">\n    <div class=\"bx--col-lg-15 bx--col-md-7 bx--col-sm-3\">\n        <FileUploader\n          accept={[\n            '.jpg',\n            '.pdf'\n          ]}\n          onChange={this.selectFile}\n          buttonKind=\"primary\"\n          buttonLabel=\"Add files\"\n          filenameStatus=\"edit\"\n          iconDescription=\"Clear file\"\n\n        \n          ></FileUploader>\n          <Button disabled={!selectedFiles} onClick={this.upload}>\n            Process Document\n            </Button>\n      </div>\n       <div class=\"bx--col-sm-1 bx--col-md-1 bx--col-lg-1\">1\n       <Button disabled={!selectedFiles} onClick={this.upload}>\n         Process Document\n         </Button>\n      </div>\n    </div>\n    <div class=\"bx--row\">\n      <div class=\"bx--col\">2 of 4</div>\n      <div class=\"bx--col\">3 of 4</div>\n      <div class=\"bx--col\">4 of 4</div>\n\n    </div>\n  </div>\n\n\n\n      {this.state.message==\"Document Processed\" &&\n      <div>\n        <ResultsList results={this.state.results} />\n       </div>\n      }\n       {this.state.docUrl != undefined  &&\n         <div>\n\n        <FileViewer fileType=\"pdf\" filePath={this.state.docUrl} />\n        </div>\n       }\n\n\n\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}