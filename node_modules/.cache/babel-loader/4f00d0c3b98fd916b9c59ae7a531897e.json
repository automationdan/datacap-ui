{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n/**\n * Copyright IBM Corp. 2016, 2018\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\nimport React, { useCallback, useEffect, useState, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport isEqual from 'lodash.isequal';\nexport function useSelection(_ref) {\n  var disabled = _ref.disabled,\n      onChange = _ref.onChange,\n      _ref$initialSelectedI = _ref.initialSelectedItems,\n      initialSelectedItems = _ref$initialSelectedI === void 0 ? [] : _ref$initialSelectedI;\n  var isMounted = useRef(false);\n  var savedOnChange = useRef(onChange);\n\n  var _useState = useState(initialSelectedItems),\n      _useState2 = _slicedToArray(_useState, 2),\n      selectedItems = _useState2[0],\n      setSelectedItems = _useState2[1];\n\n  var onItemChange = useCallback(function (item) {\n    if (disabled) {\n      return;\n    }\n\n    var selectedIndex;\n    selectedItems.forEach(function (selectedItem, index) {\n      if (isEqual(selectedItem, item)) {\n        selectedIndex = index;\n      }\n    });\n\n    if (selectedIndex === undefined) {\n      setSelectedItems(function (selectedItems) {\n        return selectedItems.concat(item);\n      });\n      return;\n    }\n\n    setSelectedItems(function (selectedItems) {\n      return removeAtIndex(selectedItems, selectedIndex);\n    });\n  }, [disabled, selectedItems]);\n  var clearSelection = useCallback(function () {\n    if (disabled) {\n      return;\n    }\n\n    setSelectedItems([]);\n  }, [disabled]);\n  useEffect(function () {\n    savedOnChange.current = onChange;\n  }, [onChange]);\n  useEffect(function () {\n    if (isMounted.current === true && savedOnChange.current) {\n      savedOnChange.current({\n        selectedItems: selectedItems\n      });\n    }\n  }, [selectedItems]);\n  useEffect(function () {\n    isMounted.current = true;\n    return function () {\n      isMounted.current = false;\n    };\n  }, []);\n  return {\n    selectedItems: selectedItems,\n    onItemChange: onItemChange,\n    clearSelection: clearSelection\n  };\n}\n\nvar Selection = /*#__PURE__*/function (_React$Component) {\n  _inherits(Selection, _React$Component);\n\n  var _super = _createSuper(Selection);\n\n  function Selection(props) {\n    var _this;\n\n    _classCallCheck(this, Selection);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"internalSetState\", function (stateToSet, callback) {\n      return _this.setState(stateToSet, function () {\n        if (callback) {\n          callback();\n        }\n\n        if (_this.props.onChange) {\n          _this.props.onChange(_this.state);\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleClearSelection\", function () {\n      if (_this.props.disabled) {\n        return;\n      }\n\n      _this.internalSetState({\n        selectedItems: []\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSelectItem\", function (item) {\n      _this.internalSetState(function (state) {\n        return {\n          selectedItems: state.selectedItems.concat(item)\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleRemoveItem\", function (index) {\n      _this.internalSetState(function (state) {\n        return {\n          selectedItems: removeAtIndex(state.selectedItems, index)\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleOnItemChange\", function (item) {\n      if (_this.props.disabled) {\n        return;\n      }\n\n      var selectedItems = _this.state.selectedItems;\n      var selectedIndex;\n      selectedItems.forEach(function (selectedItem, index) {\n        if (isEqual(selectedItem, item)) {\n          selectedIndex = index;\n        }\n      });\n\n      if (selectedIndex === undefined) {\n        _this.handleSelectItem(item);\n\n        return;\n      }\n\n      _this.handleRemoveItem(selectedIndex);\n    });\n\n    _this.state = {\n      selectedItems: props.initialSelectedItems\n    };\n    return _this;\n  }\n\n  _createClass(Selection, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          children = _this$props.children,\n          render = _this$props.render;\n      var selectedItems = this.state.selectedItems;\n      var renderProps = {\n        selectedItems: selectedItems,\n        onItemChange: this.handleOnItemChange,\n        clearSelection: this.handleClearSelection\n      };\n\n      if (render !== undefined) {\n        return render(renderProps);\n      }\n\n      if (children !== undefined) {\n        return children(renderProps);\n      }\n\n      return null;\n    }\n  }]);\n\n  return Selection;\n}(React.Component); // Generic utility for safely removing an element at a given index from an\n// array.\n\n\n_defineProperty(Selection, \"propTypes\", {\n  children: PropTypes.func,\n  disabled: PropTypes.bool,\n  initialSelectedItems: PropTypes.array.isRequired,\n  onChange: PropTypes.func,\n  render: PropTypes.func\n});\n\n_defineProperty(Selection, \"defaultProps\", {\n  initialSelectedItems: []\n});\n\nexport { Selection as default };\n\nvar removeAtIndex = function removeAtIndex(array, index) {\n  var result = array.slice();\n  result.splice(index, 1);\n  return result;\n};","map":{"version":3,"sources":["/Users/danielcrow/Documents/development/cloudfoundry/datacap-ui/node_modules/carbon-components-react/es/internal/Selection.js"],"names":["_classCallCheck","_createClass","_assertThisInitialized","_inherits","_possibleConstructorReturn","_getPrototypeOf","_defineProperty","_slicedToArray","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","constructor","Reflect","construct","arguments","apply","sham","Proxy","Boolean","prototype","valueOf","call","e","React","useCallback","useEffect","useState","useRef","PropTypes","isEqual","useSelection","_ref","disabled","onChange","_ref$initialSelectedI","initialSelectedItems","isMounted","savedOnChange","_useState","_useState2","selectedItems","setSelectedItems","onItemChange","item","selectedIndex","forEach","selectedItem","index","undefined","concat","removeAtIndex","clearSelection","current","Selection","_React$Component","_super","props","_this","stateToSet","callback","setState","state","internalSetState","handleSelectItem","handleRemoveItem","key","value","render","_this$props","children","renderProps","handleOnItemChange","handleClearSelection","Component","func","bool","array","isRequired","default","slice","splice"],"mappings":"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","sourcesContent":["import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\n/**\n * Copyright IBM Corp. 2016, 2018\n *\n * This source code is licensed under the Apache-2.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport React, { useCallback, useEffect, useState, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport isEqual from 'lodash.isequal';\nexport function useSelection(_ref) {\n  var disabled = _ref.disabled,\n      onChange = _ref.onChange,\n      _ref$initialSelectedI = _ref.initialSelectedItems,\n      initialSelectedItems = _ref$initialSelectedI === void 0 ? [] : _ref$initialSelectedI;\n  var isMounted = useRef(false);\n  var savedOnChange = useRef(onChange);\n\n  var _useState = useState(initialSelectedItems),\n      _useState2 = _slicedToArray(_useState, 2),\n      selectedItems = _useState2[0],\n      setSelectedItems = _useState2[1];\n\n  var onItemChange = useCallback(function (item) {\n    if (disabled) {\n      return;\n    }\n\n    var selectedIndex;\n    selectedItems.forEach(function (selectedItem, index) {\n      if (isEqual(selectedItem, item)) {\n        selectedIndex = index;\n      }\n    });\n\n    if (selectedIndex === undefined) {\n      setSelectedItems(function (selectedItems) {\n        return selectedItems.concat(item);\n      });\n      return;\n    }\n\n    setSelectedItems(function (selectedItems) {\n      return removeAtIndex(selectedItems, selectedIndex);\n    });\n  }, [disabled, selectedItems]);\n  var clearSelection = useCallback(function () {\n    if (disabled) {\n      return;\n    }\n\n    setSelectedItems([]);\n  }, [disabled]);\n  useEffect(function () {\n    savedOnChange.current = onChange;\n  }, [onChange]);\n  useEffect(function () {\n    if (isMounted.current === true && savedOnChange.current) {\n      savedOnChange.current({\n        selectedItems: selectedItems\n      });\n    }\n  }, [selectedItems]);\n  useEffect(function () {\n    isMounted.current = true;\n    return function () {\n      isMounted.current = false;\n    };\n  }, []);\n  return {\n    selectedItems: selectedItems,\n    onItemChange: onItemChange,\n    clearSelection: clearSelection\n  };\n}\n\nvar Selection = /*#__PURE__*/function (_React$Component) {\n  _inherits(Selection, _React$Component);\n\n  var _super = _createSuper(Selection);\n\n  function Selection(props) {\n    var _this;\n\n    _classCallCheck(this, Selection);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"internalSetState\", function (stateToSet, callback) {\n      return _this.setState(stateToSet, function () {\n        if (callback) {\n          callback();\n        }\n\n        if (_this.props.onChange) {\n          _this.props.onChange(_this.state);\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleClearSelection\", function () {\n      if (_this.props.disabled) {\n        return;\n      }\n\n      _this.internalSetState({\n        selectedItems: []\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSelectItem\", function (item) {\n      _this.internalSetState(function (state) {\n        return {\n          selectedItems: state.selectedItems.concat(item)\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleRemoveItem\", function (index) {\n      _this.internalSetState(function (state) {\n        return {\n          selectedItems: removeAtIndex(state.selectedItems, index)\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleOnItemChange\", function (item) {\n      if (_this.props.disabled) {\n        return;\n      }\n\n      var selectedItems = _this.state.selectedItems;\n      var selectedIndex;\n      selectedItems.forEach(function (selectedItem, index) {\n        if (isEqual(selectedItem, item)) {\n          selectedIndex = index;\n        }\n      });\n\n      if (selectedIndex === undefined) {\n        _this.handleSelectItem(item);\n\n        return;\n      }\n\n      _this.handleRemoveItem(selectedIndex);\n    });\n\n    _this.state = {\n      selectedItems: props.initialSelectedItems\n    };\n    return _this;\n  }\n\n  _createClass(Selection, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          children = _this$props.children,\n          render = _this$props.render;\n      var selectedItems = this.state.selectedItems;\n      var renderProps = {\n        selectedItems: selectedItems,\n        onItemChange: this.handleOnItemChange,\n        clearSelection: this.handleClearSelection\n      };\n\n      if (render !== undefined) {\n        return render(renderProps);\n      }\n\n      if (children !== undefined) {\n        return children(renderProps);\n      }\n\n      return null;\n    }\n  }]);\n\n  return Selection;\n}(React.Component); // Generic utility for safely removing an element at a given index from an\n// array.\n\n\n_defineProperty(Selection, \"propTypes\", {\n  children: PropTypes.func,\n  disabled: PropTypes.bool,\n  initialSelectedItems: PropTypes.array.isRequired,\n  onChange: PropTypes.func,\n  render: PropTypes.func\n});\n\n_defineProperty(Selection, \"defaultProps\", {\n  initialSelectedItems: []\n});\n\nexport { Selection as default };\n\nvar removeAtIndex = function removeAtIndex(array, index) {\n  var result = array.slice();\n  result.splice(index, 1);\n  return result;\n};"]},"metadata":{},"sourceType":"module"}